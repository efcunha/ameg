<!DOCTYPE html>
<html>
<head>
    <title>AMEG - Gr√°ficos Interativos</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/mobile.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/charts.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial; margin: 0; background: #f4f4f4; }
        .header { background: #2c3e50; color: white; padding: 20px; }
        .nav { background: #34495e; padding: 15px; }
        .nav a { color: white; text-decoration: none; padding: 10px 20px; margin-right: 10px; background: #3498db; border-radius: 5px; }
        .nav a:hover { background: #2980b9; }
        .nav a.active { background: #e74c3c; }
        .container { padding: 20px; }
        .logout { float: right; }
        .section-title { 
            color: #2c3e50; 
            border-left: 4px solid #3498db; 
            padding-left: 15px; 
            margin: 30px 0 20px 0; 
            font-size: 24px; 
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>AMEG - Sistema de Cadastro</h1>
        <span>Bem-vindo, {{ session.usuario }}!</span>
        <a href="/logout" class="logout" style="color: white; text-decoration: none;">Sair</a>
    </div>
    
    <div class="nav">
        <a href="/dashboard">Dashboard</a>
        <a href="/cadastrar">Novo Cadastro</a>
        <a href="/relatorios">Relat√≥rios</a>
        <a href="/charts">üìä Gr√°ficos</a>
        {% if tem_permissao_caixa %}
        <a href="/caixa">üí∞ Caixa</a>
        {% endif %}
        <a href="/arquivos_cadastros">üìÅ Arquivos</a>
        {% if is_admin_user(session.usuario) %}
        <a href="/usuarios">üë• Usu√°rios</a>
        <a href="/auditoria">üîç Auditoria</a>
        {% if session.usuario == 'admin' %}
        <a href="/admin/reset" style="background: #dc3545;">‚ö†Ô∏è Reset</a>
        {% endif %}
        {% endif %}
    </div>

    <div class="container">
        <!-- Filtros -->
        <div class="filters">
            <div class="filter-group">
                <label>Per√≠odo:</label>
                <select id="filtro-periodo">
                    <option value="todos">Todos os per√≠odos</option>
                    <option value="6m">√öltimos 6 meses</option>
                    <option value="1a">√öltimo ano</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Bairro:</label>
                <select id="filtro-bairro">
                    <option value="todos">Todos os bairros</option>
                </select>
            </div>
            <button onclick="aplicarFiltros()" class="btn-primary">Aplicar Filtros</button>
        </div>

        <!-- Demografia -->
        <h2 class="section-title">üë• Demografia dos Cadastrados</h2>
        <div class="charts-container">
            <div class="chart-card">
                <div class="chart-title">Distribui√ß√£o por Faixa Et√°ria</div>
                <canvas id="idadeChart"></canvas>
            </div>
            <div class="chart-card">
                <div class="chart-title">Top 10 Bairros</div>
                <canvas id="bairrosChart"></canvas>
            </div>
            <div class="chart-card">
                <div class="chart-title">Evolu√ß√£o de Cadastros (12 meses)</div>
                <canvas id="evolucaoChart"></canvas>
            </div>
        </div>

        <!-- Sa√∫de -->
        <h2 class="section-title">üè• Dados de Sa√∫de</h2>
        <div class="charts-container">
            <div class="chart-card">
                <div class="chart-title">Doen√ßas Cr√¥nicas Mais Comuns</div>
                <canvas id="doencasChart"></canvas>
            </div>
            <div class="chart-card">
                <div class="chart-title">Medicamentos Mais Utilizados</div>
                <canvas id="medicamentosChart"></canvas>
            </div>
            <div class="chart-card">
                <div class="chart-title">Tipos de Defici√™ncia</div>
                <canvas id="deficienciasChart"></canvas>
            </div>
        </div>

        <!-- Socioecon√¥mico -->
        <h2 class="section-title">üí∞ Situa√ß√£o Socioecon√¥mica</h2>
        <div class="charts-container">
            <div class="chart-card">
                <div class="chart-title">Distribui√ß√£o de Renda Familiar</div>
                <canvas id="rendaChart"></canvas>
            </div>
            <div class="chart-card">
                <div class="chart-title">Tipos de Moradia</div>
                <canvas id="moradiaChart"></canvas>
            </div>
            <div class="chart-card">
                <div class="chart-title">Benef√≠cios Sociais</div>
                <canvas id="beneficiosChart"></canvas>
            </div>
        </div>

        <!-- Trabalho -->
        <h2 class="section-title">üíº Dados de Trabalho</h2>
        <div class="charts-container">
            <div class="chart-card">
                <div class="chart-title">Tipos de Trabalho</div>
                <canvas id="tiposTrabalhoChart"></canvas>
            </div>
            <div class="chart-card">
                <div class="chart-title">Locais de Trabalho</div>
                <canvas id="locaisTrabalhoChart"></canvas>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/charts.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/nav-active.js') }}"></script>
</body>
</html>
